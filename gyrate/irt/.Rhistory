source("fit_irt.R")
res_matrix <- fit_irt(
  input_csv         = "../data_cleaning/IRTMatrix.csv",
  out_abilities_csv = file.path("out", "abilities_matrix_2pl.csv"),
  out_items_csv     = file.path("out", "items_matrix_2pl.csv"),
  itemtype          = "2PL",   # <-- 2-parameter logistic (no guessing)
  n_factors         = 1,
  method            = "EM",
  verbose           = FALSE
)

res_irt_2pl <- fit_irt(
  input_csv         = "../data_cleaning/IRTMatrix.csv",
  out_abilities_csv = "IRTMatrix_2PL_abilities.csv",
  out_items_csv     = "IRTMatrix_2PL_items.csv",
  id_cols           = c("", "participant_id", "AccountId"),
  itemtype          = "2PL"
)

res_irt_2pl <- fit_irt(
  input_csv         = "../data_cleaning/IRTMatrix.csv",
  out_abilities_csv = "IRTMatrix_2PL_abilities.csv",
  out_items_csv     = "IRTMatrix_2PL_items.csv",
  id_cols           = c("", "participant_id", "AccountId"),
  itemtype          = "2PL"
)

res_irt_2pl <- fit_irt(
  input_csv         = "../data_cleaning/IRTMatrix.csv",
  out_abilities_csv = "IRTMatrix_2PL_abilities.csv",
  out_items_csv     = "IRTMatrix_2PL_items.csv",
  id_cols           = c("", "participant_id", "AccountId"),
  itemtype          = "2PL"
)

res_irt_ext_2pl <- fit_irt(
  input_csv         = "../data_cleaning/IRTMatrixExtended.csv",
  out_abilities_csv = "IRTMatrixExtended_2PL_abilities.csv",
  out_items_csv     = "IRTMatrixExtended_2PL_items.csv",
  id_cols           = c("participant_id", "AccountId"),
  itemtype          = "2PL"
)

q()
